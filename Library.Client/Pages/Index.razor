@inject BookService bookService

@page "/"
@using Library.Domain.Dtos.Book;

<div class="bb-top-row px-4 d-flex justify-content-center">
    <h3>Книги</h3>
    <div>
        фильтры
    </div>
</div>

<div class="container" style="margin-top:10px;">
    <div class="row">
        <div class="col-sm-1">
            1 of 3
        </div>
        <div class="col-xxl d-flex justify-content-center flex-wrap">
            @foreach (var book in books)
            {
                <BookComponent Book="@book" />
            }
        </div>
        <div class="col-sm-1">
            3 of 3
        </div>
    </div>
</div>



@code{
    private List<BookViewModel> books = new();
    private string exceptionMessage = "";

    protected override async Task OnInitializedAsync()
    {
        var res = await bookService.GetAllBooks();

        if (res.Data != null)
        {
            books = res.Data;
            exceptionMessage = "";
        }
        else
        {
            books = new();
            exceptionMessage = $"Ошибка получения информации о книгах: {res.Excetption.Message}";
        }
        
        await base.OnInitializedAsync();
    }

}